<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á</title>
</head>
<body>
  <h1>üéØ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞—á</h1>

  <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
  <button onclick="createTask()">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>

  <p id="createdTaskInfo"></p>

  <hr>

  <!-- –í–≤–æ–¥ ID –∑–∞–¥–∞—á–∏ -->
  <label for="taskId">ID –∑–∞–¥–∞—á–∏:</label>
  <input type="text" id="taskId" placeholder="–í—Å—Ç–∞–≤—å ID –∏–∑ –æ—Ç–≤–µ—Ç–∞">
  <button onclick="checkStatus()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>

  <pre id="taskStatusOutput"></pre>

  <script>
    function createTask() {
      fetch('http://localhost:8080/tasks', { method: 'POST' })
        .then(res => res.json())
        .then(data => {
          document.getElementById('createdTaskInfo').innerText = '–°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞ —Å ID: ' + data.id;
          document.getElementById('taskId').value = data.id;
        })
        .catch(err => {
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏');
          console.error(err);
        });
    }

    function checkStatus() {
      const id = document.getElementById('taskId').value.trim();
      if (!id) {
        alert('–í–≤–µ–¥–∏—Ç–µ ID –∑–∞–¥–∞—á–∏');
        return;
      }

      fetch(`http://localhost:8080/tasks/${id}`)
        .then(res => {
          if (!res.ok) throw new Error('–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
          return res.json();
        })
        .then(data => {
          document.getElementById('taskStatusOutput').innerText = JSON.stringify(data, null, 2);
        })
        .catch(err => {
          document.getElementById('taskStatusOutput').innerText = '–û—à–∏–±–∫–∞: ' + err.message;
        });
    }
  </script>
</body>
</html>
